import os
import openai
import csv
from dotenv import load_dotenv
import os
import sys
from get_path import DATA_ARTIST_PATH


load_dotenv()
KEY = os.getenv('KEY')
if not KEY:
    print('ERROR: OPENAI.API_KEY var is missing')
    sys.exit(-1)

openai.api_key = KEY


def get_ai_description(artist):  # Get stored data from ai
    with open(DATA_ARTIST_PATH, encoding='utf-8', newline='') as f:
        reader = csv.reader(f, delimiter='|')
        for row in reader:
            if row[0] == artist:
                return row[1]
    # If not found
    print(f'Generating data for {artist}')
    description = get_ai_new_description(artist).replace('\n', '').replace('"', "'")
    with open(DATA_ARTIST_PATH, mode='a', encoding='utf-8', newline='') as f:
        writer = csv.writer(f, delimiter='|', quoting=csv.QUOTE_MINIMAL, lineterminator='')
        writer.writerow(['\n' + artist, description])
        return description


def get_ai_new_description(artist):  # Generate from ai
    ai_request = f'Date of birth and death and short introduction of {artist}'
    response = openai.Completion.create(
        model='text-davinci-003',
        prompt=ai_request,
        temperature=0,
        max_tokens=1000,
        top_p=1,
        frequency_penalty=0,
        presence_penalty=0
    )
    return response['choices'][0]['text']


"""
import csv
from spotify.data_manager import get_list_artists
import os

data = ['Alexander Borodin (November 12, 1833 – February 27, 1887) was a Russian composer and chemist of Georgian-Russian origin. He was a member of the group of composers known as The Five, who were dedicated to producing a specifically Russian kind of art music. Borodin is best known for his symphonies, his opera Prince Igor, and his tone poem In the Steppes of Central Asia. He also wrote numerous songs, chamber music, and works for the stage. His works often combined Russian folk music with Western classical forms.', 'Amilcare Ponchielli (1834-1886) was an Italian composer best known for his opera La Gioconda. He was born in Paderno Fasolaro, near Cremona, and studied music at the Milan Conservatory. He wrote several operas, including I Lituani, La Gioconda, and I Promessi Sposi, as well as a number of symphonic works. He was also a professor of composition at the Milan Conservatory. He died in Milan in 1886.', 'Antonio Salieri (18 August 1750 – 7 May 1825) was an Italian composer, conductor, and teacher. He was a pivotal figure in the development of late 18th-century opera, and is best remembered today for his rivalry with Wolfgang Amadeus Mozart, as dramatized in the play and film Amadeus. Salieri was a prolific composer of operas, symphonies, and sacred music, and was highly regarded by his contemporaries. He was also a renowned teacher, and taught many of the leading composers of the day, including Ludwig van Beethoven.', 'Antonio Vivaldi (1678-1741) was an Italian Baroque composer, virtuoso violinist, teacher, and priest. He is one of the most famous and influential composers of the Baroque era, and his works are among the most performed of all classical music. Vivaldi wrote over 500 concertos, most of which are for solo violin, as well as numerous operas, cantatas, and sacred vocal works. His best-known works include The Four Seasons, a set of four violin concertos, and the Gloria, a choral work. Vivaldi was also a prolific teacher, and his students included some of the most important composers of the 18th century.', "Arcangelo Corelli (1653–1713) was an Italian Baroque composer and violinist. He is considered one of the greatest composers of the Baroque era, and his works are among the most performed and recorded of all Baroque music. Corelli was a master of the violin, and his compositions for the instrument are some of the most influential works in the history of music. He also wrote a number of concerti grossi, chamber music, and sacred music. Corelli's influence on the development of music was immense, and his works were widely performed and imitated throughout Europe.", 'Camille Saint-Saëns (9 October 1835 – 16 December 1921) was a French composer, organist, conductor, and pianist of the Romantic era. He is known especially for The Carnival of the Animals, Danse Macabre, Samson and Delilah, Havanaise, Introduction and Rondo Capriccioso, and his Symphony No. 3 (Organ Symphony). He was a musical prodigy, making his public debut at the age of ten. He was a prolific composer, writing works in almost every genre, including symphonies, operas, ballets, chamber music, songs, and solo piano works. He was also a noted conductor, and he performed and taught extensively throughout Europe.', 'Carl Orff (July 10, 1895 – March 29, 1982) was a German composer, best known for his cantata Carmina Burana (1937). He is also known for his work in music education, and for his approach to music which he called "elemental music" or "music for music\'s sake". Orff\'s style is marked by its use of simple, direct, and often dramatic, rhythms and harmonies. He was influenced by early 20th-century composers such as Stravinsky and Debussy, as well as by the pre-modernist music of the Middle Ages and Renaissance.', "Claude Debussy (1862-1918) was a French composer who is considered one of the most important figures in music of the late 19th and early 20th centuries. He is credited with developing a new musical language that was a radical departure from the traditional forms of the time. His works are characterized by their use of subtle chromaticism, impressionistic harmonies, and innovative orchestration. Debussy's music has had a profound influence on the development of modern music, and his works remain some of the most popular and beloved in the classical repertoire.", 'Dmitri Shostakovich (25 September 1906 – 9 August 1975) was a Russian composer and pianist. He is regarded as one of the major composers of the 20th century. His works span a broad range of musical genres, from symphonies and concertos to film scores and chamber music. He wrote 15 symphonies, 15 string quartets, two operas, and numerous other works. He was awarded the Stalin Prize five times and the Lenin Prize once. He was also awarded the Order of Lenin and the Order of the Red Banner of Labour.', 'Edvard Grieg (15 June 1843 – 4 September 1907) was a Norwegian composer and pianist. He is widely considered one of the leading Romantic era composers, and his music is part of the standard classical repertoire worldwide. His use and development of Norwegian folk music in his own compositions brought the music of Norway to international consciousness, as well as helping to develop a national identity, much as Jean Sibelius and Bedřich Smetana did in Finland and Bohemia, respectively.', "Edward Elgar (2 June 1857 – 23 February 1934) was an English composer, many of whose works have entered the British and international classical concert repertoire. Among his best-known compositions are orchestral works including the Enigma Variations, the Pomp and Circumstance Marches, concertos for violin and cello, and two symphonies. He also composed choral works, including The Dream of Gerontius, chamber music and songs. He was appointed Master of the King's Musick in 1924.", "Felix Mendelssohn (1809-1847) was a German composer, pianist, organist, and conductor of the early Romantic period. He was a crucial figure in the revival of interest in the music of Johann Sebastian Bach, and is best known for his overtures and incidental music for A Midsummer Night's Dream, as well as his oratorio Elijah. Mendelssohn was a prolific composer, writing symphonies, concertos, oratorios, piano music, and chamber music. He was also an influential conductor, touring Europe and leading the Leipzig Gewandhaus Orchestra.", 'Franz Liszt (October 22, 1811 – July 31, 1886) was a Hungarian composer, virtuoso pianist, conductor, music teacher, arranger, and organist of the Romantic era. He was one of the most prominent figures in music during the 19th century and is considered to be one of the greatest pianists of all time. He was also a renowned composer, writing a variety of works, including symphonic poems, operas, masses, and solo piano pieces. He was also a renowned teacher, giving master classes and writing a number of influential books on piano technique.', 'Franz Schubert (1797-1828) was an Austrian composer and one of the most important figures in the transition from Classical to Romantic music. He wrote over 600 works, including nine symphonies, numerous operas, masses, and chamber music. He is best known for his lieder (art songs) and his unfinished symphony, the "Great" Symphony in C major. Schubert\'s music is characterized by its lyricism, melodic beauty, and emotional depth. He was a master of the piano and a prolific composer, and his influence on later composers was immense.', 'Franz von Suppé (1819-1895) was an Austrian composer of light operas and operettas. He was born in Spalato, Dalmatia (now Split, Croatia) and studied music in Vienna. He wrote over 30 operettas, including the popular works Boccaccio, Light Cavalry, and Poet and Peasant. His works were popular in the 19th century and are still performed today.', 'Frédéric François Chopin (1810-1849) was a Polish composer and virtuoso pianist of the Romantic era. He is widely considered one of the greatest composers of all time. He wrote primarily for the solo piano, and his works are considered among the most technically demanding and emotionally expressive in the repertoire. His music is characterized by a rich harmonic language, a wide range of dynamics, and a highly individual style of melodic and rhythmic writing. He was also a renowned teacher, and his influence on the development of piano technique and composition was immense.', 'George Frideric Handel (23 February 1685 – 14 April 1759) was a German-born British Baroque composer who is famous for his operas, oratorios, and concerti grossi. He was born in Halle, Germany, and moved to London in 1712, where he spent the rest of his life. Handel composed over forty operas, including the popular works Rinaldo, Giulio Cesare, and Alcina. He also wrote numerous oratorios, including the famous Messiah, as well as concerti grossi, chamber music, and organ concertos. Handel was a major influence on the development of classical music in the 18th century, and his works are still performed today.', "Georges Bizet (25 October 1838 – 3 June 1875) was a French composer and pianist of the Romantic era. He is best known for his operas, particularly Carmen, which has become one of the most popular and frequently performed works in the classical repertoire. Other well-known works by Bizet include the Symphony in C, the opera Les pêcheurs de perles, and the incidental music to L'Arlésienne. Bizet's music is noted for its vibrant orchestration and its rhythmic and harmonic drive.", "Giacomo Puccini (1858-1924) was an Italian composer of operas. He is widely regarded as one of the greatest operatic composers of all time. His works include the operas La Bohème, Tosca, Madama Butterfly, and Turandot. Puccini's music is characterized by its lyricism, melodic beauty, and emotional power. He was also a master of orchestration, and his operas are known for their lush, sweeping orchestrations. Puccini's works remain popular today, and his operas are regularly performed in opera houses around the world.", "Gioachino Rossini (1792-1868) was an Italian composer who is best known for his operas. He wrote 39 operas, including The Barber of Seville and William Tell, as well as numerous sacred works, chamber music, and songs. He was a master of comic opera and is considered one of the greatest opera composers of all time. He was also a prolific composer of instrumental music, including overtures, symphonies, and concertos. Rossini's music is characterized by its melodic beauty, rhythmic vitality, and brilliant orchestration.", 'Giuseppe Verdi (1813-1901) was an Italian composer of operas and other vocal music. He was one of the most influential composers of the 19th century, and his works remain popular today. Verdi wrote over 30 operas, including Rigoletto, La Traviata, and Aida. He also wrote sacred music, chamber music, and orchestral works. Verdi was a major figure in the development of Italian opera, and his works are still performed around the world.', "Gustav Holst (1874–1934) was an English composer, arranger, and teacher. He is best known for his orchestral suite The Planets, which has become one of the most popular works in the classical repertoire. Holst was a prolific composer, writing in a variety of genres including operas, ballets, choral works, and chamber music. He was also an influential teacher, working with students such as Ralph Vaughan Williams, Imogen Holst, and Arthur Bliss. Holst's music is characterized by its use of modal harmonies and its exploration of English folk music.", 'Gustav Mahler (7 July 1860 – 18 May 1911) was an Austrian late-Romantic composer, and one of the leading conductors of his generation. As a composer he acted as a bridge between the 19th century Austro-German tradition and the modernism of the early 20th century. While in his lifetime his status as a conductor was established beyond question, his own music gained wide popularity only after periods of relative neglect which included a ban on its performance in much of Europe during the Nazi era. After 1945 his compositions were rediscovered by a new generation of listeners; Mahler then became one of the most frequently performed and recorded of all composers, a position he has sustained into the 21st century.', 'Jacques Offenbach (20 June 1819 – 5 October 1880) was a German-born French composer, cellist and impresario of the romantic period. He is remembered for his nearly 100 operettas of the 1850s–1870s and his uncompleted opera The Tales of Hoffmann. He was a powerful influence on later composers of the operetta genre, particularly Johann Strauss, Jr. and Arthur Sullivan. His best-known works were continually revived during the 20th century, and many of his operettas continue to be staged in the 21st. The Tales of Hoffmann remains part of the standard opera repertory.', "Johann Pachelbel (baptized September 1, 1653 – March 3, 1706) was a German composer, organist, and teacher who brought the south German organ tradition to its peak. He composed a large body of sacred and secular music, and his contributions to the development of the chorale prelude and fugue have earned him a place among the most important composers of the middle Baroque era. Pachelbel's music enjoyed enormous popularity during his lifetime; he had many pupils and his music became a model for the composers of south and central Germany. Today, Pachelbel is best known for the Canon in D, the only canon he wrote.", 'Johann Sebastian Bach (31 March 1685 – 28 July 1750) was a German composer and musician of the Baroque period. He is known for instrumental compositions such as the Brandenburg Concertos and the Goldberg Variations, and vocal music such as the St Matthew Passion and the Mass in B minor. He is also known for his organ works, such as The Well-Tempered Clavier, and for his choral works, such as the St John Passion and the Christmas Oratorio. He is widely regarded as one of the greatest composers of all time.', 'Johann Strauss II (October 25, 1825 – June 3, 1899) was an Austrian composer of light music, particularly dance music and operettas. He composed over 500 waltzes, polkas, quadrilles, and other types of dance music, as well as several operettas and a ballet. In his lifetime, he was known as "The Waltz King," and was largely responsible for the popularity of the waltz in Vienna during the 19th century. His most famous pieces include "The Blue Danube," "Tales from the Vienna Woods," and "The Emperor Waltz."', 'Johannes Brahms (7 May 1833 – 3 April 1897) was a German composer and pianist of the Romantic period. He is one of the most well-known and influential composers of the 19th century. His works are known for their emotional depth, complexity, and technical mastery. He wrote symphonies, concertos, chamber music, piano works, and choral works. He was also an important influence on later composers, including Gustav Mahler and Arnold Schoenberg.', 'Joseph Haydn (1732-1809) was an Austrian composer and one of the most prominent figures of the Classical period. He is often referred to as the "Father of the Symphony" and "Father of the String Quartet" due to his significant contributions to these genres. Haydn composed over 100 symphonies, 68 string quartets, and numerous other works, including operas, concertos, and chamber music. He was a highly influential figure in the development of the Classical style, and his works are still widely performed today.', "The London Philharmonic Orchestra (LPO) was founded in 1932 and is one of the world's leading symphony orchestras. It is based in London, England, and is one of five permanent symphony orchestras based in the city. The LPO has no fixed date of birth or death, as it is still an active orchestra.The LPO is renowned for its performances of classical music, and has a long history of performing works by some of the world's greatest composers, including Beethoven, Brahms, Mahler, and Sibelius. The orchestra has also performed contemporary works by composers such as John Adams, Thomas Adès, and John Corigliano. The LPO has toured extensively throughout Europe, the United States, and Asia, and has recorded over 500 albums.", 'Ludwig van Beethoven (17 December 1770 – 26 March 1827) was a German composer and pianist. A crucial figure in the transition between the Classical and Romantic eras in classical music, he remains one of the most recognized and influential musicians of this period, and is considered to be one of the greatest composers of all time. His works span the transition from the classical period to the romantic period. His best-known compositions include 9 symphonies, 5 piano concertos, 1 violin concerto, 32 piano sonatas, 16 string quartets, his great Mass the Missa solemnis, and one opera, Fidelio.', 'Luigi Boccherini (1743–1805) was an Italian composer and cellist of the Classical era. He is best known for his string quintets, of which he wrote over 100. He also wrote a variety of other chamber works, including string quartets and symphonies, as well as operas, cantatas, and other vocal works. He was a prolific composer, and his works were highly influential in the development of the Classical style. He was born in Lucca, Italy, and studied music with his father, a cellist and double-bass player. He went on to become a court musician in Madrid, where he wrote many of his most famous works. He died in Madrid in 1805.', "Maurice Ravel (March 7, 1875 – December 28, 1937) was a French composer of the Impressionist period. He is best known for his orchestral work, Boléro, and his famous piano compositions, such as Pavane pour une infante défunte and Jeux d'eau. Ravel was a master of orchestration, and his works often feature rich textures and complex harmonies. He was also a great admirer of the music of J.S. Bach, and his works often incorporate elements of Baroque music. Ravel was a major influence on the development of 20th-century classical music, and his works are still widely performed today.", 'Niccolò Paganini (1782–1840) was an Italian violinist, violist, guitarist, and composer. He is widely considered one of the greatest violinists of all time, and his 24 Caprices for Solo Violin are among the best known of his compositions. He was also a prolific composer of works for the violin, including concertos, sonatas, and variations. His virtuosic technique on the violin was legendary, and he was known for his ability to play difficult passages with great speed and accuracy. He was also a master of improvisation, and his performances often included improvisations on popular tunes of the day. He was a major influence on later violinists, and his influence can be heard in the works of many composers, including Johannes Brahms, Franz Liszt, and Richard Wagner.', 'Nikolai Rimsky-Korsakov (18 March 1844 – 8 June 1908) was a Russian composer, and a member of the group of composers known as The Five. He was a master of orchestration, and his best-known orchestral compositions—Capriccio Espagnol, the Russian Easter Festival Overture, and the symphonic suite Scheherazade—are staples of the classical music repertoire. He wrote operas, including The Maid of Pskov, The Tale of Tsar Saltan, and The Golden Cockerel, and chamber music.', 'Ottorino Respighi (July 9, 1879 – April 18, 1936) was an Italian composer, musicologist, and conductor. He is best known for his symphonic poems and tone poems, which are inspired by the art, literature, and history of his native country. He also wrote operas, chamber music, and choral works. His works are characterized by a rich harmonic language and lush orchestration. He was a member of the Italian Academy of Arts and Sciences and was awarded the Order of Merit of the Italian Republic.', 'Pyotr Ilyich Tchaikovsky (May 7, 1840 – November 6, 1893) was a Russian composer of the Romantic era. He is one of the most popular and beloved composers of all time, and his works are among the most performed in the classical repertoire. His music is known for its emotional intensity, its use of melody, and its distinctive orchestration. He wrote symphonies, operas, ballets, concertos, chamber music, and songs. His most famous works include the ballets Swan Lake and The Nutcracker, the 1812 Overture, the symphonies Manfred, Pathétique, and Romeo and Juliet, and the opera Eugene Onegin.', 'Richard Strauss (11 June 1864 – 8 September 1949) was a German composer of the late Romantic and early modern eras. He is known for his operas, tone poems, and other orchestral works, such as Der Rosenkavalier and Also sprach Zarathustra. Strauss was also a prominent conductor in Western Europe and the United States. He composed over 500 works, including 150 lieder, nine symphonies, and several operas. He was a leading figure in the development of modern classical music.', 'Richard Wagner (22 May 1813 – 13 February 1883) was a German composer, theatre director, polemicist, and conductor who is chiefly known for his operas. Unlike most opera composers, Wagner wrote both the libretto and the music for each of his stage works. Initially establishing his reputation as a composer of works in the romantic vein of Carl Maria von Weber and Giacomo Meyerbeer, Wagner revolutionised opera through his concept of the Gesamtkunstwerk ("total work of art"), by which he sought to synthesise the poetic, visual, musical and dramatic arts, with music subsidiary to drama. He described this vision in a series of essays published between 1849 and 1852. Wagner realised these ideas most fully in the first half of the four-opera cycle Der Ring des Nibelungen (The Ring of the Nibelung).', 'Robert Schumann (June 8, 1810 – July 29, 1856) was a German composer and influential music critic. He is widely regarded as one of the greatest composers of the Romantic era. His works include symphonies, concertos, operas, and chamber music. He was also an important music critic, writing extensively on the music of his time. Schumann was a passionate advocate of the music of Johannes Brahms, Felix Mendelssohn, and Franz Schubert. He was also an important figure in the revival of interest in the music of Johann Sebastian Bach.', 'Sergei Rachmaninoff (1873-1943) was a Russian composer, pianist, and conductor. He is widely considered one of the greatest composers of the Romantic era. His works include four piano concertos, three symphonies, and numerous solo piano works. He was also a renowned pianist, performing his own works in concert throughout his career. He was a major influence on 20th-century music, and his works remain popular today.', "The Slovak Philharmonic is a symphony orchestra based in Bratislava, Slovakia. Founded in 1949, it is one of the oldest and most respected orchestras in the country. The orchestra is currently led by its principal conductor, Bystrik Rezucha.The Slovak Philharmonic has a long and distinguished history, having performed with some of the world's most renowned conductors and soloists. It has also made numerous recordings, including a Grammy-nominated recording of works by Dvořák.The orchestra has toured extensively throughout Europe, Asia, and the United States, and has performed at some of the world's most prestigious venues, including Carnegie Hall in New York City and the Musikverein in Vienna.", 'Wolfgang Amadeus Mozart (1756-1791) was an Austrian composer and musician. He is widely regarded as one of the greatest composers of all time and his influence on classical music is profound. He composed over 600 works, including symphonies, operas, concertos, chamber music, and religious music. His works are still performed and studied today. Mozart was a child prodigy and began composing at the age of five. He was a prolific composer and wrote some of the most beloved pieces of classical music, including the operas The Marriage of Figaro and Don Giovanni, the symphonies No. 40 and No. 41, and the piano concertos No. 21 and No. 23.']
data_path = 'C:/Users/Nico/Desktop/Estudios/Python/music_downloader/spotify/INFO_COMPOSER.csv'

data_artist = []
# for artist in get_list_artists():  # Read
#     data_artist.append(get_ai_description(artist))
#     print(data_artist)

if os.path.exists(data_path) and os.path.isfile(data_path):  # Delete
    os.remove(data_path)

for info, artist in zip(data, get_list_artists()):  # Write
    with open(data_path, mode='a', encoding='utf-8', newline='') as f:
        writer = csv.writer(f, delimiter='|', quoting=csv.QUOTE_NONE, escapechar="*", quotechar="'")
        writer.writerow([artist, info])

# Need to replace " with ' and '' with '
"""
